<link rel="import" href="../../../polymer/polymer.html">
<link rel="import" href="../d2l-organization-behavior.html">

<!--
`d2l-organization-name`

Polymer-based web component for a organization name.

@demo demo/d2l-organization-name/d2l-organization-name-demo.html Organization Name
-->

<dom-module id="d2l-organization-name">
	<template strip-whitespace>
		[[_organizationName]]
	</template>

	<script>
		Polymer({
			is: 'd2l-organization-name',

			properties: {
				href: String,

				_organizationName: String
			},

			behaviors: [
				D2L.Organization.Behavior
			],

			observers: [
				'_fetchOrganization(href)',
				'_sendVoiceReaderInfo(_organizationName)'
			],

			_fetchOrganization: function(organizationHref) {
				return this._fetchSirenEntity(organizationHref)
					.then(function(organizationEntity) {
						if (!organizationEntity) {
							return;
						}

						if (!organizationEntity.properties) {
							return;
						}

						this._organizationName = organizationEntity.properties.name;
					}.bind(this));
			},

			_sendVoiceReaderInfo: function(organizationName) {
				var details = {
					organization: {
						name: organizationName
					}
				};

				this._fireD2lOrganizationAccessible(details);
			},
		});
	</script>
</dom-module>
